---
layout: null # This layout doesn't use a parent layout
permalink: /carousel_posts.json # The URL where the JSON will be accessible
---
[
  {% assign posts_to_include = site.posts | sort: "date" | reverse %} {# Sort by date, newest first #}
  {% for post in posts_to_include limit: 10 %} {# Fetch up to 10 posts for the carousel #}
    {
      "title"    : {{ post.title | jsonify }},
      "url"      : {{ post.url | relative_url | jsonify }},
      "date"     : "{{ post.date | date: "%Y-%m-%d" }}",
      "tags"     : {{ post.tags | jsonify }},
      "excerpt"  : {{ post.excerpt | strip_html | strip_newlines | replace: '.', '. ' | replace: ':', ': ' | replace: '!', '! ' | replace: '?', '? ' | remove: '  ' | jsonify }},
      "content_html": {{ post.content | jsonify }} {# Send full HTML content for image extraction in JS #}
    }{% unless forloop.last %},{% endunless %}
  {% endfor %}
]